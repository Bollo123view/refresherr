{% extends "base.html" %}
{% block title %}Broken symlinks{% endblock %}
{% block content %}
<h1 class="h3 mb-3">Broken symlinks</h1>
{% if not items %}
  <div class="alert alert-success">No broken items ðŸŽ‰</div>
{% else %}
  <div class="table-responsive">
    <table class="table table-hover align-middle">
      <thead><tr><th>Title / Term</th><th style="min-width:420px">Path</th><th style="min-width:420px">Last target</th><th class="text-end">Actions</th></tr></thead>
      <tbody>
        {% for it in items %}
        <tr>
          <td class="fw-semibold">{{ it.term }}</td>
          <td><small class="text-muted">{{ it.path }}</small></td>
          <td><small class="text-muted">{{ it.target or '-' }}</small></td>
          <td class="text-end sticky-actions">
            <form method="post" action="{{ url_for('action_auto') }}" class="d-inline">
              <input type="hidden" name="term" value="{{ it.term }}">
              <input type="hidden" name="path" value="{{ it.path }}">
              <button type="submit" class="btn btn-sm btn-primary">Auto search &amp; repair</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endif %}
{% endblock %}
