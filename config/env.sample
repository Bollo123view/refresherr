# Refresherr Configuration
# Copy this file to .env and customize for your environment

# ============================================================================
# Configuration File
# ============================================================================
# Path to YAML configuration file (defaults to /config/config.yaml)
CONFIG_FILE=/config/config.yaml

# ============================================================================
# Scan Configuration
# ============================================================================
# Scan interval in seconds (default: 300 = 5 minutes)
# This overrides the value in config.yaml if set
SCAN_INTERVAL=300

# Dry run mode - set to 'false' to enable actual repairs
# When true, no changes are made to symlinks
DRYRUN=true

# Log level for Refresherr (DEBUG, INFO, WARNING, ERROR)
REFRESHER_LOG_LEVEL=INFO

# Pattern to ignore in scanned paths (optional)
# Files/directories containing this substring will be skipped
IGNORE_SUBSTR=cinesync

# ============================================================================
# Path Configuration
# ============================================================================
# Data directory for database and logs
DATA_DIR=/data

# Legacy symlink root (used by dashboard if config.yaml not available)
# Prefer using scan.roots in config.yaml for multiple roots
SYMLINK_ROOT=/opt/media/jelly

# Legacy mount root check (optional)
MOUNT_ROOT=/mnt/remote/realdebrid

# ============================================================================
# Relay Service Configuration
# ============================================================================
# Research relay service base URL
# Example: http://research-relay:5050 (for Docker) or http://localhost:5050
RELAY_BASE=http://research-relay:5050

# Authentication token for relay service
# Must match the token configured in the relay service
RELAY_TOKEN=your-secret-token-here

# ============================================================================
# Notification Configuration
# ============================================================================
# Discord webhook URL for notifications (optional)
# Get this from Discord: Server Settings > Integrations > Webhooks
DISCORD_WEBHOOK=

# ============================================================================
# Dashboard Configuration
# ============================================================================
# Flask secret key for session management
FLASK_SECRET=change-me-to-random-string

# Dashboard port (default: 8088)
PORT=8088

# ============================================================================
# Advanced Configuration
# ============================================================================
# Custom database path (overrides DATA_DIR/symlinks.db)
# DB_PATH=/data/symlinks.db

# Build/deployment tracking (optional)
# GIT_REV=main

# ============================================================================
# Docker Volume Mapping Examples
# ============================================================================
# When running in Docker, ensure your docker-compose.yml volumes match
# the paths in your config.yaml path_mappings section.
#
# Example docker-compose.yml volumes:
#   - ./config:/config:ro              # Config files (read-only)
#   - ./data:/data                     # Database and logs
#   - /opt/media/jelly:/opt/media/jelly:rw  # Symlink root
#   - /mnt/realdebrid:/mnt/remote/realdebrid:ro  # Actual files
#
# Then in config.yaml path_mappings:
#   - container: /opt/media/jelly
#     logical: /mnt/host-storage/media/jelly
#     description: "Jellyfin symlink root"
#
#   - container: /mnt/remote/realdebrid
#     logical: /mnt/host-storage/realdebrid-mount
#     description: "RealDebrid mount"

# ============================================================================
# Notes
# ============================================================================
# 1. Environment variables override values in config.yaml
# 2. Sensitive data (tokens, webhooks) should be in .env, not config.yaml
# 3. Path mappings help translate between container and host paths
# 4. Use routing in config.yaml to direct symlinks to correct instances
# 5. See README_CONFIG.md for detailed configuration guide
